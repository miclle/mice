// Panels
// --------------------------------------------------

@use 'variables' as *;

// Panel component variables
.panel {
  --panel-background: #fff;
  --panel-body-padding: 15px;
  --panel-heading-padding: 10px 15px;
  --panel-footer-padding: 10px 15px;
  --panel-border-radius: 2px;
  --panel-inner-border: #ddd;
  --panel-footer-background: #f5f5f5;

  // Default panel
  --panel-default-border: #ddd;
  --panel-default-text: #333;
  --panel-default-background: #fff;

  // Panel variant colors
  --panel-primary-background: var(--primary);
  --panel-primary-text: #fff;
  --panel-primary-border: color-mix(in srgb, var(--primary) 85%, black);
  --panel-success-background: var(--success);
  --panel-success-text: #fff;
  --panel-success-border: color-mix(in srgb, var(--success) 85%, black);
  --panel-info-background: var(--info);
  --panel-info-text: #fff;
  --panel-info-border: color-mix(in srgb, var(--info) 85%, black);
  --panel-warning-background: var(--warning);
  --panel-warning-text: var(--gray-dark);
  --panel-warning-border: color-mix(in srgb, var(--warning) 85%, black);
  --panel-danger-background: var(--danger);
  --panel-danger-text: #fff;
  --panel-danger-border: color-mix(in srgb, var(--danger) 85%, black);
}

// Mixin
@mixin panel-variant($border, $text-color, $bg-color) {
  border-color: $border;
  background-color: $bg-color;
  color: $text-color;

  & > .heading {
    border-color: $border;
  }

  & > .footer {
    + .collapse > .body {
      border-bottom-color: $border;
    }
  }
}

// Base class
.panel {
  margin-bottom: var(--line-height-computed);
  background-color: var(--panel-background);
  border: 1px solid transparent;
  border-radius: var(--panel-border-radius);
  box-shadow: 0 1px 1px rgb(0 0 0 / 5%);

  // Panel contents
  > .body {
    padding: var(--panel-body-padding);
    display: flow-root;

    *:last-child {
      margin-bottom: 0;
    }
  }

  // Optional heading
  > .heading {
    padding: var(--panel-heading-padding);
    border-bottom: 1px solid transparent;

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      margin: 0;
      padding: 0;
      font-size: 16px;
      color: inherit;
      border-bottom: none;

      > a {
        color: inherit;
      }
    }
  }

  // Optional footer (stays gray in every modifier class)
  > .footer {
    padding: var(--panel-footer-padding);
    background-color: var(--panel-footer-background);
    border-top: 1px solid var(--panel-inner-border);
  }

  // Default variant
  @include panel-variant(
    var(--panel-default-border),
    var(--panel-default-text),
    var(--panel-default-background)
  );

  // Contextual variants
  @each $variant in $variants {
    &.#{$variant} {
      @include panel-variant(
        var(--panel-#{$variant}-border),
        var(--panel-#{$variant}-text),
        var(--panel-#{$variant}-background)
      );
    }
  }
}

// List groups in panels
.panel {
  > .group {
    margin-bottom: 0;

    > li,
    > a,
    .item {
      border-width: 1px 0;
      border-radius: 0;
    }

    &:first-child {
      > li:first-child,
      > a:first-child,
      .item:first-child {
        border-top: 0;
      }
    }

    &:last-child {
      > li:last-child,
      > a:last-child,
      .item:last-child {
        border-bottom: 0;
      }
    }
  }

  .heading + .list-group {
    > li:first-child,
    > a:first-child,
    .item:first-child {
      border-top-width: 0;
    }
  }
}

// Tables in panels
.panel {
  > table,
  > table.responsive > table {
    margin-bottom: 0;
  }

  > table:first-child,
  > table.responsive:first-child > table:first-child {
    > thead:first-child,
    > tbody:first-child {
      > tr:first-child {
        td:first-child,
        th:first-child {
          border-top-left-radius: calc(var(--panel-border-radius) - 1);
        }
        td:last-child,
        th:last-child {
          border-top-right-radius: calc(var(--panel-border-radius) - 1);
        }
      }
    }
  }

  > table:last-child,
  > table.responsive:last-child > table:last-child {
    > tbody:last-child,
    > tfoot:last-child {
      > tr:last-child {
        td:first-child,
        th:first-child {
          border-bottom-left-radius: calc(var(--panel-border-radius) - 1);
        }
        td:last-child,
        th:last-child {
          border-bottom-right-radius: calc(var(--panel-border-radius) - 1);
        }
      }
    }
  }

  > .body + table,
  > .body + table.responsive {
    border-top: 1px solid var(--table-border-color);
  }

  > table > tbody:first-child > tr:first-child th,
  > table > tbody:first-child > tr:first-child td {
    border-top: 0;
  }

  > table-bordered,
  > table.responsive > table-bordered {
    border: 0;

    > thead,
    > tbody,
    > tfoot {
      > tr {
        > th:first-child,
        > td:first-child {
          border-left: 0;
        }
        > th:last-child,
        > td:last-child {
          border-right: 0;
        }
      }
    }

    > thead,
    > tbody {
      > tr:first-child {
        > td,
        > th {
          border-bottom: 0;
        }
      }
    }

    > tbody,
    > tfoot {
      > tr:last-child {
        > td,
        > th {
          border-bottom: 0;
        }
      }
    }
  }

  > table.responsive {
    border: 0;
    margin-bottom: 0;
  }
}
