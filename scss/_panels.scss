// Panels
// --------------------------------------------------

@use 'mixins' as *;

// Panels
@mixin panel-variant($border, $heading-text-color, $heading-bg-color, $heading-border) {
  border-color: $border;

  & > .heading {
    color: $heading-text-color;
    background-color: $heading-bg-color;
    border-color: $heading-border;
  }
  & > .footer {
    + .collapse > .body {
      border-bottom-color: $border;
    }
  }
}

// Base class
.panel {
  margin-bottom: var(--line-height-computed);
  background-color: var(--panel-bg);
  border: 1px solid transparent;
  border-radius: var(--panel-border-radius);
  box-shadow: 0 1px 1px rgb(0 0 0 / 5%);

  // Panel contents
  > .body {
    padding: var(--panel-body-padding);

    @include clearfix();
    *:last-child {
      margin-bottom: 0;
    }
  }

  // Optional heading
  > .heading {
    padding: var(--panel-heading-padding);
    border-bottom: 1px solid transparent;

    // Within heading, strip any `h*` tag of its default margins for spacing.
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      margin: 0;
      padding: 0;
      font-size: 16px;
      color: inherit;
      border-bottom: none;

      > a {
        color: inherit;
      }
    }
  }

  // Optional footer (stays gray in every modifier class)
  > .footer {
    padding: var(--panel-footer-padding);
    background-color: var(--panel-footer-bg);
    border-top: 1px solid var(--panel-inner-border);
  }
}

// List groups in panels
// By default, space out list group content from panel headings to account for
// any kind of custom content between the two.

.panel {
  > .group {
    margin-bottom: 0;

    > li,
    > a,
    .item {
      border-width: 1px 0;
      border-radius: 0;
    }

    // Add border top radius for first one
    &:first-child {
      > li:first-child,
      > a:first-child,
      .item:first-child {
        border-top: 0;
      }
    }
    // Add border bottom radius for last one
    &:last-child {
      > li:last-child,
      > a:last-child,
      .item:last-child {
        border-bottom: 0;
      }
    }
  }
}

// Collapse space between when there's no additional content.
.panel {
  .heading + .list-group {
    > li:first-child,
    > a:first-child,
    .item:first-child {
      border-top-width: 0;
    }
  }
}

// Tables in panels
// Place a non-bordered `table` within a panel (not within a `.panel-body`) and
// watch it go full width.

.panel {
  > table,
  > table.responsive > table {
    margin-bottom: 0;
  }
  // Add border top radius for first one
  > table:first-child,
  > table.responsive:first-child > table:first-child {
    > thead:first-child,
    > tbody:first-child {
      > tr:first-child {
        td:first-child,
        th:first-child {
          border-top-left-radius: calc(var(--panel-border-radius) - 1);
        }
        td:last-child,
        th:last-child {
          border-top-right-radius: calc(var(--panel-border-radius) - 1);
        }
      }
    }
  }
  // Add border bottom radius for last one
  > table:last-child,
  > table.responsive:last-child > table:last-child {
    > tbody:last-child,
    > tfoot:last-child {
      > tr:last-child {
        td:first-child,
        th:first-child {
          border-bottom-left-radius: calc(var(--panel-border-radius) - 1);
        }
        td:last-child,
        th:last-child {
          border-bottom-right-radius: calc(var(--panel-border-radius) - 1);
        }
      }
    }
  }
  > .body + table,
  > .body + table.responsive {
    border-top: 1px solid var(--table-border-color);
  }
  > table > tbody:first-child > tr:first-child th,
  > table > tbody:first-child > tr:first-child td {
    border-top: 0;
  }
  > table-bordered,
  > table.responsive > table-bordered {
    border: 0;
    > thead,
    > tbody,
    > tfoot {
      > tr {
        > th:first-child,
        > td:first-child {
          border-left: 0;
        }
        > th:last-child,
        > td:last-child {
          border-right: 0;
        }
      }
    }
    > thead,
    > tbody {
      > tr:first-child {
        > td,
        > th {
          border-bottom: 0;
        }
      }
    }
    > tbody,
    > tfoot {
      > tr:last-child {
        > td,
        > th {
          border-bottom: 0;
        }
      }
    }
  }
  > table.responsive {
    border: 0;
    margin-bottom: 0;
  }
}

// Contextual variations
.panel {
  @include panel-variant(
    var(--panel-default-border),
    var(--panel-default-text),
    var(--panel-default-heading-bg),
    var(--panel-default-border)
  );
}
.panel.primary {
  @include panel-variant(
    var(--panel-primary-border),
    var(--panel-primary-text),
    var(--panel-primary-heading-bg),
    var(--panel-primary-border)
  );
}
.panel.success {
  @include panel-variant(
    var(--panel-success-border),
    var(--panel-success-text),
    var(--panel-success-heading-bg),
    var(--panel-success-border)
  );
}
.panel.info {
  @include panel-variant(
    var(--panel-info-border),
    var(--panel-info-text),
    var(--panel-info-heading-bg),
    var(--panel-info-border)
  );
}
.panel.warning {
  @include panel-variant(
    var(--panel-warning-border),
    var(--panel-warning-text),
    var(--panel-warning-heading-bg),
    var(--panel-warning-border)
  );
}
.panel.danger {
  @include panel-variant(
    var(--panel-danger-border),
    var(--panel-danger-text),
    var(--panel-danger-heading-bg),
    var(--panel-danger-border)
  );
}
