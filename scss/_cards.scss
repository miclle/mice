// Cards
// --------------------------------------------------

@use 'variables' as *;

// Card component variables
.card {
  --card-background: #fff;
  --card-body-padding: 15px;
  --card-heading-padding: 10px 15px;
  --card-footer-padding: 10px 15px;
  --card-border-radius: 2px;
  --card-inner-border: #ddd;
  --card-footer-background: #f5f5f5;

  // Default card
  --card-default-border: #ddd;
  --card-default-text: #333;
  --card-default-background: #fff;

  // Card variant colors
  --card-primary-background: var(--primary);
  --card-primary-text: #fff;
  --card-primary-border: color-mix(in srgb, var(--primary) 85%, black);
  --card-success-background: var(--success);
  --card-success-text: #fff;
  --card-success-border: color-mix(in srgb, var(--success) 85%, black);
  --card-info-background: var(--info);
  --card-info-text: #fff;
  --card-info-border: color-mix(in srgb, var(--info) 85%, black);
  --card-warning-background: var(--warning);
  --card-warning-text: var(--gray-dark);
  --card-warning-border: color-mix(in srgb, var(--warning) 85%, black);
  --card-danger-background: var(--danger);
  --card-danger-text: #fff;
  --card-danger-border: color-mix(in srgb, var(--danger) 85%, black);
}

// Mixin
@mixin card-variant($border, $text-color, $bg-color) {
  border-color: $border;
  background-color: $bg-color;
  color: $text-color;

  & > .heading {
    border-color: $border;
  }

  & > .footer {
    + .collapse > .body {
      border-bottom-color: $border;
    }
  }
}

// Base class
.card {
  margin-bottom: var(--line-height-computed);
  background-color: var(--card-background);
  border: 1px solid transparent;
  border-radius: var(--card-border-radius);
  box-shadow: 0 1px 1px rgb(0 0 0 / 5%);

  // Card contents
  > .body {
    padding: var(--card-body-padding);
    display: flow-root;

    *:last-child {
      margin-bottom: 0;
    }
  }

  // Optional heading
  > .heading {
    padding: var(--card-heading-padding);
    border-bottom: 1px solid transparent;

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      margin: 0;
      padding: 0;
      font-size: 16px;
      color: inherit;
      border-bottom: none;

      > a {
        color: inherit;
      }
    }
  }

  // Optional footer (stays gray in every modifier class)
  > .footer {
    padding: var(--card-footer-padding);
    background-color: var(--card-footer-background);
    border-top: 1px solid var(--card-inner-border);
  }

  // Default variant
  @include card-variant(
    var(--card-default-border),
    var(--card-default-text),
    var(--card-default-background)
  );

  // Contextual variants
  @each $variant in $variants {
    &.#{$variant} {
      @include card-variant(
        var(--card-#{$variant}-border),
        var(--card-#{$variant}-text),
        var(--card-#{$variant}-background)
      );
    }
  }
}

// List groups in cards
.card {
  > .group {
    margin-bottom: 0;

    > li,
    > a,
    .item {
      border-width: 1px 0;
      border-radius: 0;
    }

    &:first-child {
      > li:first-child,
      > a:first-child,
      .item:first-child {
        border-top: 0;
      }
    }

    &:last-child {
      > li:last-child,
      > a:last-child,
      .item:last-child {
        border-bottom: 0;
      }
    }
  }

  .heading + .list-group {
    > li:first-child,
    > a:first-child,
    .item:first-child {
      border-top-width: 0;
    }
  }
}

// Tables in cards
.card {
  > table,
  > table.responsive > table {
    margin-bottom: 0;
  }

  > table:first-child,
  > table.responsive:first-child > table:first-child {
    > thead:first-child,
    > tbody:first-child {
      > tr:first-child {
        td:first-child,
        th:first-child {
          border-top-left-radius: calc(var(--card-border-radius) - 1);
        }
        td:last-child,
        th:last-child {
          border-top-right-radius: calc(var(--card-border-radius) - 1);
        }
      }
    }
  }

  > table:last-child,
  > table.responsive:last-child > table:last-child {
    > tbody:last-child,
    > tfoot:last-child {
      > tr:last-child {
        td:first-child,
        th:first-child {
          border-bottom-left-radius: calc(var(--card-border-radius) - 1);
        }
        td:last-child,
        th:last-child {
          border-bottom-right-radius: calc(var(--card-border-radius) - 1);
        }
      }
    }
  }

  > .body + table,
  > .body + table.responsive {
    border-top: 1px solid var(--table-border-color);
  }

  > table > tbody:first-child > tr:first-child th,
  > table > tbody:first-child > tr:first-child td {
    border-top: 0;
  }

  > table-bordered,
  > table.responsive > table-bordered {
    border: 0;

    > thead,
    > tbody,
    > tfoot {
      > tr {
        > th:first-child,
        > td:first-child {
          border-left: 0;
        }
        > th:last-child,
        > td:last-child {
          border-right: 0;
        }
      }
    }

    > thead,
    > tbody {
      > tr:first-child {
        > td,
        > th {
          border-bottom: 0;
        }
      }
    }

    > tbody,
    > tfoot {
      > tr:last-child {
        > td,
        > th {
          border-bottom: 0;
        }
      }
    }
  }

  > table.responsive {
    border: 0;
    margin-bottom: 0;
  }
}
